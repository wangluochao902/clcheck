(function(e){function t(t){for(var r,o,s=t[0],l=t[1],c=t[2],u=0,h=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&h.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(h.length)h.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var l=n[o];0!==a[l]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},i=[];function o(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2d0afa49":"85aedb4f","chunk-2d0e6553":"6d50bc83"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=r);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=o(e);var c=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(u);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",c.name="ChunkLoadError",c.type=r,c.request=i,n[1](c)}a[e]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/clcheck/",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0a36":function(e,t,n){"use strict";var r=n("663d"),a=n.n(r);a.a},"25f7":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],o=n("2877"),s={},l=Object(o["a"])(s,a,i,!1,null,null,null),c=l.exports,u=n("8c4f"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("router-view")],1)},h=[],p={},m=Object(o["a"])(p,d,h,!1,null,null,null),f=m.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("br"),n("h3",{staticStyle:{"text-align":"center"}},[e._v("Report")]),n("button",{staticStyle:{"text-align":"center",margin:"0 auto",display:"flex","margin-bottom":"2em"},on:{click:function(t){return e.runAllDockerfile()}}},[e._v(" Check all dockerfiles in GitHub ")]),n("button",{staticStyle:{"text-align":"center",margin:"0 auto",display:"flex","margin-bottom":"2em"},on:{click:function(t){return e.showAllBugs()}}},[e._v(" render bug collection ")]),n("button",{staticStyle:{"text-align":"center",margin:"0 auto",display:"flex","margin-bottom":"2em"},on:{click:function(t){return e.showCustom()}}},[e._v(" render custom dockerfiles ")]),n("div",{staticClass:"result",staticStyle:{"font-size":"100%"}},[n("p",{directives:[{name:"show",rawName:"v-show",value:e.done,expression:"done"}],staticStyle:{"margin-left":"0.3em","margin-top":"0.5em","margin-bottom":"0em"}},[e._v(" "+e._s(e.message)+" ")]),n("p",{staticStyle:{"margin-left":"0.3em","margin-top":"0.5em","margin-bottom":"0em"}},[e._v(" "+e._s(e.finished)+" ")]),e._l(e.allOutputs,(function(t,r){return n("div",{key:r},[n("div",[n("div",[n("div",{staticClass:"repoDetail",staticStyle:{display:"inline"}},[e._v(" ObjectId Index: "+e._s(t.objectIdIndex)+" "),n("button",{staticStyle:{"margin-left":"3em"},on:{click:function(t){return e.flipDockerfile(r)}}},[e._v(" "+e._s(e.show[r]?"Hide":"Show")+" Dockerfile ")]),n("button",{staticStyle:{"margin-left":"3em"},on:{click:function(n){return e.addToUnknown(t)}}},[e._v(" add to unknown ")]),n("button",{staticStyle:{"margin-left":"3em"},on:{click:function(n){return e.addToBug(t)}}},[e._v(" add to bug collection ")]),n("button",{staticStyle:{"margin-left":"3em"},on:{click:function(t){return e.addToVerifiedBug(r)}}},[e._v(" add to verified bug collection ")]),n("button",{staticStyle:{"margin-left":"3em"},on:{click:function(n){return e.deleteFromBug(t.objectIdIndex)}}},[e._v(" delete from bug collection ")]),n("button",{staticStyle:{"margin-left":"3em"},on:{click:function(n){return e.addToSkipped(t)}}},[e._v(" add to skipped ")])]),n("div",{staticClass:"repoDetail"},[e._v(" In File: "),n("a",{attrs:{href:"https://github.com/"+t.repository+"/blob/master/"+t.file,target:"_blank"}},[e._v(e._s(t.file))])]),n("div",{staticClass:"repoDetail"},[e._v(" In Repo: "),n("a",{attrs:{href:"https://github.com/"+t.repository,target:"_blank"}},[e._v(e._s(t.repository))])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.show[r],expression:"show[outerIndex]"}],staticClass:"dockerfile",attrs:{id:"editor"+r}})]),n("button",{staticStyle:{display:"flex",margin:"0 auto","text-align":"center"},on:{click:function(t){return e.flipOutput(r)}}},[e._v(" "+e._s(e.showOutput[r]?"Hide":"Show")+" Output ")]),n("div",{staticStyle:{border:"solid grey",width:"95%",margin:"0 auto","margin-top":"0.4em","margin-bottom":"2em"}},e._l(t.outputs,(function(t,a){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.showOutput[r],expression:"showOutput[outerIndex]"}],key:a},[n("div",{staticStyle:{"margin-left":"0.3em","margin-top":"0.7em"}},[n("span",{style:{color:t.color}},[e._v(e._s(t.type))]),e._v(" on "),n("span",{staticStyle:{color:"blue",cursor:"pointer","text-decoration":"underline"},on:{click:function(n){return e.setPosition(t.line,t.col)}}},[e._v(" "+e._s(t.line)+":")]),n("span",{staticStyle:{"margin-left":"0.5em",color:"rgb(71, 71, 69)"}},[e._v(e._s(t.commandline))])]),n("div",{staticStyle:{"margin-left":"2em",color:"rgb(85, 60, 23)","font-family":'"Consolas", "Courier New", "Monospace"',"margin-bottom":"0.4em"}},[e._v(" "+e._s(t.message)+" ")])])})),0)])}))],2)])},v=[],y=(n("cb29"),n("caad"),n("d3b7"),n("8a79"),n("2532"),n("3ca3"),n("ddb0"),n("96cf"),n("1da1")),b=n("b85c"),w=(n("c975"),n("fb6a"),n("b0c0"),n("b64b"),n("ac1f"),n("5319"),n("1276"),n("2ca0"),n("bc3a")),k=n.n(w),_=n("33f9"),x=n("d8b8"),O=n("c65c"),S=n("840f").DockerfileParser;console.log=function(){};n("f1dd");var C=["add","arg","cmd","copy","entrypoint","env","expose","from","healthcheck","label","maintainer","onbuild","run","shell","stopsignal","user","volume","workdir","cross_build_copy"];function j(e,t){var n=e.getLineContent(t.lineNumber),r=t.column-1,a=n[r],i=/[\w-]/;while(r>=0){if(!i.test(n[r]))break;r--}var o=t.column-1;while(o<n.length){if(!i.test(n[o]))break;o++}var s={char:a,word:n.slice(r+1,o)};return s}function R(e,t){return 1==t.start.row&&(t.start.col+=e.col-1),1==t.end.row&&(t.end.col+=e.col-1),t.start.row+=e.row-1,t.end.row+=e.row-1,t}function N(e,t,n){var r=e[t];if(null!=r){var a=null,i=n;return n in r["explanation_key_to_ExplanationPair_key"]?a=r["explanation_key_to_ExplanationPair_key"][n]:n in r["option_keys_to_OptionPair_key"]?a=r["option_keys_to_OptionPair_key"][n]:"-"+n in r["option_keys_to_OptionPair_key"]&&(i="-"+n,a=r["option_keys_to_OptionPair_key"][i]),null!=a?{found_key:i,explanation:r.explanation[a]}:null}}function P(e,t){for(var n=0;n<2;n++){if(e[n]<t[n])return!0;if(e[n]>t[n])return!1}return!0}function I(e,t){var n=Object.assign({},e);return null==n.endLineNumber&&(n.endLineNumber=n.startLineNumber),null==n.endColumn&&(n.endColumn=n.startColumn+1),1==n.startLineNumber&&(n.startColumn+=t.col-1),1==n.endLineNumber&&(n.endColumn+=t.col-1),n.startLineNumber+=t.row-1,n.endLineNumber+=t.row-1,n}function L(e,t,n){var r=e.getRange(),a=e.instruction,i={startLineNumber:r.start.line+1,startColumn:r.start.character+1,endLineNumber:r.start.line+1,endColumn:a.length,severity:_["MarkerSeverity"].Error,message:'Unknow instruction "'.concat(a,'"')};t.push(i),n.push({line:i.startLineNumber,col:i.startColumn,color:"red",type:"error",commandline:e.getTextContent(),message:i.message})}function T(e,t,n,r,a){var i=/[\s\S]*`#[\S\s]*`[\s\S]*/g;if(!i.test(t)&&"Unclosed $("!=e.message&&'Unclosed "'!=e.message&&"Unclosed '"!=e.message&&!e.message.includes("Unexpected 'CONTINUE'\n    at parse")){var o=e.message.indexOf("Parse error on line ")+"Parse error on line ".length,s=e.message.slice(10).indexOf(":")+10,l=parseInt(e.message.slice(o,s));if(null==l)c=t,l=n.row;else{var c=t.split("\n")[l-1];l+=n.row-1}if(": Unexpected 'Then'"!=e.message.slice(s)&&(!e.message.includes("Unexpected 'EOF'\n    at parse")||!t.includes("then"))&&(!e.message.includes("Unexpected 'EOF'\n    at parse")||!t.includes(":-"))&&": Unexpected 'In'"!=e.message.slice(s)&&!e.message.includes("Cannot read property 'start' of undefined")&&!e.message.includes("Cannot read property 'operator' of undefined")&&!e.message.includes("Cannot read property 'char' of undefined")&&!e.message.includes("Cannot read property 'doubleQuoting' of undefined")&&!e.message.includes("Cannot read property 'singleQuoting' of undefined")&&!e.message.includes("Cannot parse arithmetic expression")){var u=_["MarkerSeverity"].Error,d="Parsing Error: "+e.message;d=d.replace(/Parse error on line [0-9]*: /g,""),": Unexpected 'AND_IF'"==e.message.slice(s)&&(d="You may have empty line after a '\\'",u=_["MarkerSeverity"].Warning);var h={startLineNumber:l,endLineNumber:l,startColumn:1,endColumn:1e3,message:d,severity:u};r.push(h),a.push({line:l,col:h.startColumn,color:8==u?"red":"rgb(230, 141, 8)",type:8==u?"error":"warning",commandline:c,message:h.message})}}}function W(e,t,n,r,a){var i=[],o=[],s=[],l=[];if("shell"===t)l.push(M(e,{row:1,col:1},o,s,i,n,r,a));else{var c,u=S.parse(e),d=u.getInstructions(),h=Object(b["a"])(d);try{for(h.s();!(c=h.n()).done;){var p=c.value,m=p.instruction;if(C.includes(m.toLowerCase())||m.startsWith("{")||L(p,o,s),"RUN"===p.getKeyword()){var f=p.getRange(),g={row:f.start.line+1,col:f.start.character+1+4},v=p.getTextContent().slice(4);l.push(M(v,g,o,s,i,n,r,a))}}}catch(y){h.e(y)}finally{h.f()}}return Promise.all(l).then((function(){return{outputs:s,errorMarkers:o,commandRange:i}}))}function E(e,t){return{line:e.startLineNumber,col:e.startColumn,color:8==e.severity?"red":"rgb(230, 141, 8)",type:8==e.severity?"error":"warning",commandline:t,message:e.message}}function M(e,t,n,r,a,i,o,s){return B.apply(this,arguments)}function B(){return B=Object(y["a"])(regeneratorRuntime.mark((function e(t,n,r,a,i,o,s,l){var c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=t.replace(/\r\n/g,"\n"),t=t.replace(/(^|\n)[ \t]*#.*(?=(\n|$))/g,"$1\\"),t=t.replace(/\\ +\n/g,"\\\n"),c=x(t,{insertLOC:!0}),u=[],O(c,{Command:function(e){if(null!=e.name){var c=e.name.text,d=e.name.loc.start,h=e.loc.end;if(e.suffix.length>0){var p,m,f=Object(b["a"])(e.suffix);try{for(f.s();!(m=f.n()).done;){if(p=m.value,"Word"!==p.type||p.text.startsWith("`")||p.text.startsWith("$")||(h=p.loc.end),"Word"===p.type&&p.text.includes("`"))return;if("Word"===p.type&&p.text.includes("$"))return}}catch(k){f.e(k)}finally{f.f()}}var g=t.slice(d.char,h.char+1),v={start:d,end:h};if(v=R(n,v),i.push({commandName:c,start:v.start,end:v.end}),s.has(g)){var y=s.get(g);if(null!=y){var w=I(y,v.start);r.push(w),a.push(E(w,g))}}else u.push(D(l,g,c).then((function(e){var t=e.data.commandInfo;Object.keys(t).length>0&&(o[c]=t);var n=e.data.marker;if(null!=n){var i=_["MarkerSeverity"][n.severity];n.severity=i,s.put(g,n);var l=I(n,v.start);r.push(l),a.push(E(l,g))}}),(function(e){})))}}}),e.abrupt("return",Promise.all(u).then((function(){})));case 10:e.prev=10,e.t0=e["catch"](0),T(e.t0,t,n,r,a);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),B.apply(this,arguments)}function D(e,t,n){return H.apply(this,arguments)}function H(){return H=Object(y["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",k()({method:"POST",url:t+"checkcommand/",headers:{"Content-Type":"application/json"},data:{commandline:n,commandName:r}}));case 1:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function A(e,t){return U.apply(this,arguments)}function U(){return U=Object(y["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",k()({method:"POST",url:t+"dockerfiles/",headers:{"Content-Type":"application/json"},data:{index:n}}));case 1:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function $(e){return z.apply(this,arguments)}function z(){return z=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.get(t+"getSkipped/"));case 1:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function F(e,t){return V.apply(this,arguments)}function V(){return V=Object(y["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",k()({method:"POST",url:t+"addToSkipped/",headers:{"Content-Type":"application/json"},data:{details:n}}));case 1:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function G(e){return Y.apply(this,arguments)}function Y(){return Y=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.get(t+"getUnknown/"));case 1:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function q(e,t){return J.apply(this,arguments)}function J(){return J=Object(y["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",k()({method:"POST",url:t+"addToUnknown/",headers:{"Content-Type":"application/json"},data:{details:n}}));case 1:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}function Q(e){return K.apply(this,arguments)}function K(){return K=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.get(t+"getBugs/"));case 1:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}function X(e){return Z.apply(this,arguments)}function Z(){return Z=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.get(t+"getVerifiedBugs/"));case 1:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function ee(e,t){return te.apply(this,arguments)}function te(){return te=Object(y["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",k()({method:"POST",url:t+"addToBug/",headers:{"Content-Type":"application/json"},data:{details:n}}));case 1:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}function ne(e,t){return re.apply(this,arguments)}function re(){return re=Object(y["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",k()({method:"POST",url:t+"addToVerifiedBug/",headers:{"Content-Type":"application/json"},data:{content:n}}));case 1:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}function ae(e,t){return ie.apply(this,arguments)}function ie(){return ie=Object(y["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",k()({method:"POST",url:t+"deleteFromBug/",headers:{"Content-Type":"application/json"},data:{objectIdIndex:n}}));case 1:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}n("4ec9");var oe=n("d4ec"),se=n("bee2"),le=function(){function e(t){Object(oe["a"])(this,e),this.cache=new Map,this.capacity=t}return Object(se["a"])(e,[{key:"has",value:function(e){return this.cache.has(e)}},{key:"get",value:function(e){if(!this.cache.has(e))return-1;var t=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,t),this.cache.get(e)}},{key:"put",value:function(e,t){this.cache.has(e)&&this.cache.delete(e),this.cache.set(e,t),this.cache.size>this.capacity&&this.cache.delete(this.cache.keys().next().value)}}]),e}(),ce=n("3d20"),ue=n.n(ce),de={name:"Report",data:function(){return{path:"https://clcheck.herokuapp.com/clcheck/",allOutputs:[],message:"Done analysis!",clicked:!1,show:[],showOutput:[],dockerfiles:[],lruCache:new le(20),done:!1,finished:0,created:null}},methods:{flipDockerfile:function(e){var t=this;this.show[e]=!this.show[e],r["a"].set(this.show,e,this.show[e]),null==this.created&&(this.created=new Array(this.dockerfiles.length).fill(!1)),this.created[e]||r["a"].nextTick((function(){var n=_["editor"].create(document.getElementById("editor"+e),{language:"dockerfile",theme:"vs",scrollBeyondLastLine:!1,minimap:{enabled:!1},value:t.dockerfiles[e],hover:{delay:300}});n.layout(),t.created[e]=!0}))},flipOutput:function(e){this.showOutput[e]=!this.showOutput[e],r["a"].set(this.showOutput,e,this.showOutput[e])},showAllBugs:function(){var e=this;Q(this.path).then((function(t){var n,r=t.data.bugs,a=0,i=r.length,o=Object(b["a"])(r);try{for(o.s();!(n=o.n()).done;){var s=n.value;he(e.path,s,e.show,e.showOutput,e.dockerfiles,e.lruCache,e.allOutputs).then((function(){i-=1,a+=1,0==i&&(e.done=!0),a%20==0&&(e.finished=a)}))}}catch(l){o.e(l)}finally{o.f()}}))},runAllDockerfile:function(){this.clicked=!0,me(this,17840,100)},showCustom:function(){for(var e=[40221,46111],t=0,n=e;t<n.length;t++){var r=n[t];he(this.path,r,this.show,this.showOutput,this.dockerfiles,this.lruCache,this.allOutputs)}},addToSkipped:function(e){F(this.path,e).then(ue.a.fire("Success!","You just added this dockerfile to skipped collection","success"))},addToUnknown:function(e){q(this.path,e).then(ue.a.fire("Success!","You just added this dockerfile to unknown collection","success"))},addToBug:function(e){ee(this.path,e).then(ue.a.fire("Success!","You just added this dockerfile to bug collection","success"))},addToVerifiedBug:function(e){var t={repository:this.allOutputs[e].repository,file:this.allOutputs[e].file,outputs:this.allOutputs[e].outputs,objectIdIndex:this.allOutputs[e].objectIdIndex,value:this.dockerfiles[e]};ne(this.path,t).then((function(e){e.data.Added?ue.a.fire("Success!","You just added this dockerfile to verified bug collection","success"):ue.a.fire("fail!","You just added this dockerfile to verified bug collection","error")}))},deleteFromBug:function(e){ae(this.path,e)}},created:function(){}};function he(e,t,n,r,a,i,o){return pe.apply(this,arguments)}function pe(){return pe=Object(y["a"])(regeneratorRuntime.mark((function e(t,n,r,a,i,o,s){var l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,A(t,n).then((function(e){return e.data.file.endsWith(".js")||e.data.file.endsWith(".vim")||e.data.file.endsWith(".ejs")||e.data.file.endsWith(".yaml")||e.data.file.endsWith(".yml")||e.data.file.endsWith(".rb")||e.data.file.endsWith(".erb")||e.data.file.endsWith(".java")||e.data.file.endsWith(".py")||e.data.file.endsWith(".kak")||e.data.file.endsWith(".patch")||e.data.file.endsWith(".ftl")||e.data.file.endsWith(".json")||e.data.file.endsWith(".c")||e.data.file.endsWith(".php")||e.data.file.endsWith(".tar")||e.data.file.endsWith(".nanorc")||e.data.file.endsWith(".h")||e.data.file.endsWith(".cpp")||e.data.file.endsWith(".lua")||e.data.file.endsWith(".go")||e.data.file.includes("window")||e.data.file.endsWith(".sh")||e.data.file.endsWith(".rst")||e.data.file.endsWith(".template")||e.data.file.endsWith(".tmLanguage")||e.data.file.endsWith(".md")?null:W(e.data.code,"dockerfile",[],o,t).then((function(t){return{data:e.data,checkResults:t}}))}));case 2:l=e.sent,null!=l&&l.checkResults.outputs.length>0&&(r.push(!1),a.push(!0),i.push(l.data.code),s.push({repository:l.data.repository,file:l.data.file,outputs:l.checkResults.outputs,objectIdIndex:n}));case 4:case"end":return e.stop()}}),e)}))),pe.apply(this,arguments)}function me(e,t,n){return fe.apply(this,arguments)}function fe(){return fe=Object(y["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i,o,s,l,c,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$(t.path);case 2:return a=e.sent,i=a.data.skipped_index,e.next=6,G(t.path).then((function(e){return e.data.unknown_index}));case 6:o=e.sent,s=80,l=0;case 9:if(!(l<r)){e.next=30;break}c=[],u=0;case 12:if(!(u<s)){e.next=20;break}if(d=n+l*s+u,!i.includes(d)&&!o.includes(d)){e.next=16;break}return e.abrupt("continue",17);case 16:c.push(he(t.path,d,t.show,t.showOutput,t.dockerfiles,t.lruCache,t.allOutputs));case 17:u++,e.next=12;break;case 20:return e.next=22,Promise.all(c);case 22:if(e.sent,(l+1)%1==0&&(t.finished=(l+1)*s),!(t.allOutputs.length>30)){e.next=27;break}return e.abrupt("break",30);case 27:l++,e.next=9;break;case 30:t.done=!0;case 31:case"end":return e.stop()}}),e)}))),fe.apply(this,arguments)}var ge=de,ve=(n("ffcc"),Object(o["a"])(ge,g,v,!1,null,null,null)),ye=ve.exports,be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("br"),n("h3",{staticStyle:{"text-align":"center"}},[e._v("Bugs found using CLcheck")]),n("div",{staticClass:"result",staticStyle:{"font-size":"100%"}},[n("br"),e._l(e.allOutputs,(function(t,r){return n("div",{key:r},[n("div",[n("div",{staticStyle:{"margin-top":"1em","margin-left":"3em"}},[n("div",{staticClass:"repoDetail",staticStyle:{display:"inline"}},[e._v(" Dockerfile Index: "+e._s(r+1)+" "),n("button",{staticStyle:{"margin-left":"3em"},on:{click:function(t){return e.flipDockerfile(r)}}},[e._v(" "+e._s(e.show[r]?"Hide":"Show")+" Dockerfile ")])]),n("button",{staticClass:"repoDetail"},[n("a",{attrs:{href:t.issueLink,target:"_blank"}},[e._v("Github Issue")])]),n("div",{staticClass:"repoDetail"},[e._v(" In Repo: "),n("a",{attrs:{href:"https://github.com/"+t.repository,target:"_blank"}},[e._v(e._s(t.repository))])]),n("div",{staticClass:"repoDetail"},[e._v(" In File: "),n("a",{attrs:{href:"https://github.com/"+t.repository+"/blob/master/"+t.file,target:"_blank"}},[e._v(e._s(t.file))])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.show[r],expression:"show[outerIndex]"}],staticClass:"dockerfile",attrs:{id:"editor"+r}})]),n("button",{staticStyle:{display:"flex",margin:"0 auto","text-align":"center","margin-top":"0.5em"},on:{click:function(t){return e.flipOutput(r)}}},[e._v(" "+e._s(e.showOutput[r]?"Hide":"Show")+" Output ")]),n("div",{staticStyle:{border:"solid grey",width:"90%",margin:"0 auto","margin-top":"0.4em","margin-bottom":"2em","margin-left":"3em"}},e._l(t.outputs,(function(t,a){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.showOutput[r],expression:"showOutput[outerIndex]"}],key:a},[n("div",{staticStyle:{"margin-left":"0.3em","margin-top":"0.7em"}},[n("span",{style:{color:t.color}},[e._v(e._s(t.type))]),e._v(" on "),n("span",{staticStyle:{color:"blue",cursor:"pointer","text-decoration":"underline"},on:{click:function(n){return e.setPosition(r,t.line,t.col)}}},[e._v(" "+e._s(t.line)+":")]),n("span",{staticStyle:{"margin-left":"0.5em",color:"rgb(71, 71, 69)"}},[e._v(e._s(t.commandline))])]),n("div",{staticStyle:{"margin-left":"2em",color:"rgb(85, 60, 23)","font-family":'"Consolas", "Courier New", "Monospace"',"margin-bottom":"0.4em"}},[e._v(" "+e._s(t.message)+" ")])])})),0),n("hr",{staticStyle:{"margin-top":"1em","margin-bottom":"1em"}})])}))],2)])},we=[],ke=(n("99af"),{name:"Bugs",data:function(){return{path:"https://clcheck.herokuapp.com/clcheck/",allOutputs:[],message:"Done analysis!",clicked:!1,show:[],showOutput:[],editors:[]}},methods:{flipDockerfile:function(e){this.show[e]=!this.show[e],r["a"].set(this.show,e,this.show[e])},flipOutput:function(e){this.showOutput[e]=!this.showOutput[e],r["a"].set(this.showOutput,e,this.showOutput[e])},showAllBugs:function(){var e=this;X(this.path).then((function(t){e.allOutputs=t.data.contents;var n,a=[46111,136961,40221,21596],i=[],o=[],s=Object(b["a"])(e.allOutputs);try{for(s.s();!(n=s.n()).done;){var l=n.value;a.includes(l.objectIdIndex)?i.push(l):o.push(l)}}catch(d){s.e(d)}finally{s.f()}e.allOutputs=i.concat(o);for(var c=function(t){e.show.push(!0),e.showOutput.push(!0),r["a"].nextTick((function(){return e.createEditor(t)}))},u=0;u<e.allOutputs.length;u++)c(u)}))},setPosition:function(e,t,n){this.editors[e].setPosition({lineNumber:t,column:n}),this.editors[e].revealPositionInCenter({lineNumber:t,column:n}),this.editors[e].focus()},createEditor:function(e){var t=_["editor"].create(document.getElementById("editor"+e),{language:"dockerfile",theme:"vs",scrollBeyondLastLine:!1,minimap:{enabled:!1},value:this.allOutputs[e].value,hover:{delay:300},readOnly:!0});t.layout(),this.editors.push(t)}},created:function(){this.showAllBugs()}}),_e=ke,xe=(n("0a36"),Object(o["a"])(_e,be,we,!1,null,null,null)),Oe=xe.exports,Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{"text-align":"center"}},[e._m(0),n("p",{staticStyle:{"margin-top":"0.2em","margin-bottom":"0.6em"}},[e._v(" check errors in command lines of dockerfile or shell script ")]),n("div",[n("span",[e._v("Programming Language:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.language,expression:"language"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.language=t.target.multiple?n:n[0]}}},[n("option",[e._v("dockerfile")]),n("option",[e._v("shell")])])]),n("br")]),n("div",[n("Editor",{attrs:{language:e.language,path:e.path}})],1),n("br"),n("div",{staticStyle:{"text-align":"left"}},[n("div",{staticStyle:{margin:"0 auto",width:"51%"}},[n("h3",{staticStyle:{"text-align":"center","margin-top":"0.3em","margin-bottom":"0.2em"}},[e._v(" Why CLcheck? ")]),e._m(1),e._m(2),n("h4",{staticStyle:{"text-align":"center"}},[n("router-link",{attrs:{to:"/bugs"}},[e._v("Bugs")]),e._v(" we found using our tool in GitHub ")],1),e._m(3),n("p",{staticStyle:{"font-size":"60%","text-align":"left"}},[e._v(" © 2020 wangluochao All Rights Reserved ")])])])])},Ce=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",{staticStyle:{"margin-bottom":"0em"}},[e._v(" CLcheck "),n("a",{staticClass:"fa fa-github",staticStyle:{color:"blue","font-size":"50%","text-decoration":"none"},attrs:{href:"https://github.com/wangluochao902/clcheck",target:"_blank"}},[e._v("GitHub")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticStyle:{"margin-top":"0.1em"}},[n("li",[e._v(" A large portion of codes in Dockerfile and Shell script are command lines like "),n("i",[e._v("`apt-get install ...`")]),e._v(". However, the well-known tool "),n("a",{attrs:{href:"https://www.shellcheck.net"}},[e._v("ShellSheck")]),e._v(" does not have rules for command lines, assuming all of them are correct! ")]),n("li",[e._v(" We design a domain specific language "),n("span",{staticStyle:{"font-weight":"bold"}},[e._v("Eman")]),e._v(" to specify the grammar that a shell command should follow. Here is an example of Eman. "),n("a",{attrs:{href:"https://raw.githubusercontent.com/wangluochao902/clcheck/master/eman/apt-get.eman"}},[e._v("apt-get.eman")]),e._v(". Compared with its original manual "),n("a",{attrs:{href:"https://raw.githubusercontent.com/wangluochao902/clcheck/master/eman/apt-get.txt"}},[e._v("apt-get.man")]),e._v(", the structure is similar, making creating a new Eman faster. Association Rules Mining and NLP techniques can help mining rules. ")]),n("li",[e._v(" CLcheck is based on Eman, emitting errors when rules in a Eman are violated. ")]),n("li",[e._v(" CLcheck is conservative. We use Dockerfiles in top stared 100,000 GitHub repositories to test against the tool. The Eman or CLcheck will be modified when a false positive occurs. Some true positves (real bugs) are listed in the example above. ")]),n("li",[e._v(" Hovering over a supported command (like apt-get) and its options will pop out useful information. ")]),n("li",[e._v(" Current supported commands are `apt-get`, `tar`, `cd`, `cp`, `rm`, `chown`, `chmod`, `groupadd`, `mkdir`, `mv`. ")]),n("li",[e._v(" Commands working in progress are `echo`, `curl`, `make`, `git`, `apk` etc. ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h4",{staticStyle:{"text-align":"center"}},[e._v(" Useful? Please let us know by giving us a star at "),n("a",{staticClass:"fa fa-github",staticStyle:{color:"blue","font-size":"100%","text-decoration":"none"},attrs:{href:"https://github.com/wangluochao902/clcheck",target:"_blank"}},[e._v("GitHub")]),e._v(". ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h4",{staticStyle:{"text-align":"center"}},[e._v(" Visit other projects at "),n("a",{attrs:{href:"https://smart-scripts.org",target:"_blank"}},[e._v("smart-scripts.org")]),e._v(". ")])}],je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:"dockerfile"==e.language,expression:"language == 'dockerfile'"}],staticClass:"load"},[n("span",{staticClass:"example",staticStyle:{},on:{click:function(t){return e.load(0)}}},[e._v("Loads a buggy example detected by this tool in Microsoft's repo ")]),n("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"https://github.com/Azure/sonic-buildimage/issues/4458",target:"_blank"}},[e._v("link")]),n("span",{staticClass:"example",staticStyle:{"margin-left":"2em"},on:{click:function(t){return e.loadRandom()}}},[e._v("Loads a random buggy example detected by this tool from GitHub")])]),n("div",{staticClass:"editor",attrs:{id:"container"}}),n("br"),n("div",{staticStyle:{"text-align":"center"}},[e._v("Analysis Result")]),n("div",{staticClass:"output",staticStyle:{"font-size":"85%"}},[n("p",{staticStyle:{"margin-left":"0.3em","margin-top":"0.5em","margin-bottom":"0em"}},[e._v(" "+e._s(e.message)+" ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:0==e.outputs.length,expression:"outputs.length == 0"}],staticStyle:{"margin-top":"0.5em"}}),e._l(e.outputs,(function(t,r){return n("div",{key:r},[n("div",{staticStyle:{"margin-left":"0.3em","margin-top":"0.7em"}},[n("span",{style:{color:t.color}},[e._v(e._s(t.type))]),e._v(" in "),n("span",{staticStyle:{color:"blue",cursor:"pointer","text-decoration":"underline"},on:{click:function(n){return e.setPosition(t.line,t.col)}}},[e._v(" "+e._s(t.line)+":")]),n("span",{staticStyle:{"margin-left":"0.5em",color:"rgb(71, 71, 69)"}},[e._v(e._s(t.commandline))])]),n("div",{staticStyle:{"margin-left":"2em",color:"rgb(85, 60, 23)","font-family":'"Consolas", "Courier New", "Monospace"',"margin-bottom":"0.4em"}},[e._v(" "+e._s(t.message)+" ")])])}))],2)])},Re=[],Ne=(n("a9e3"),{name:"Editor",props:{width:[String,Number],height:[String,Number],language:String,path:String},data:function(){return{editor:null,lruCache:new le(1),value:"",errorMarkers:[],explanation:"",commandRange:{},AllCommandInfo:{},message:"The analysis result will be here. Loading for the first time may take a few seconds",outputs:[]}},mounted:function(){this.initMonaco()},watch:{errorMarkers:function(){_["editor"].setModelMarkers(this.editor.getModel(),"test",this.errorMarkers)},language:function(){_["editor"].setModelLanguage(this.editor.getModel(),this.language),this.resetValue(),this.lruCache=new le(10)},value:function(){this.editor.setValue(this.value)}},methods:{resetValue:function(){"shell"==this.language?this.value="if [ 3 -gt 2 ]; \nthen\n    apt-get --assume-no install -y nodejs;\nfi;":this.value="FROM ubuntu:16.04\nRUN apt-get clean -y      && \\\n    apt-get autoclean -   && \\\n    apt-get autoremove -y && \\\n    rm -rf /debs && \\\n    tar xvffile.tar\n"},loadRandom:function(){var e=Math.ceil(8*Math.random());this.load(e)},load:function(e){var t=this;k.a.get("https://raw.githubusercontent.com/wangluochao902/clcheck/master/web/client/public/buggy_files/".concat(e,".txt")).then((function(e){t.value=e.data})).catch((function(e){}))},setPosition:function(e,t){this.editor.setPosition({lineNumber:e,column:t}),this.editor.revealPositionInCenter({lineNumber:e,column:t}),this.editor.focus()},provideHover:function(e,t){var n=this.getCommandName(t);if(null!=n){var r=j(e,t),a=N(this.AllCommandInfo,n,r.word);return null==a&&(a=N(this.AllCommandInfo,n,r.char)),null!=a?{contents:[{value:"**".concat(a["found_key"],"**")},{value:"```python\n"+a["explanation"]+"\n```"}]}:{contents:{value:"***".concat(r.word,"*")}}}},getCommandName:function(e){var t=[e.lineNumber,e.column];if(Object.keys(this.commandRange).length>0){var n,r=Object(b["a"])(this.commandRange);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(P([a["start"]["row"],a["start"]["col"]],t)&&P(t,[a["end"]["row"],a["end"]["col"]]))return a.commandName}}catch(i){r.e(i)}finally{r.f()}}return null},initMonaco:function(){var e=this;this.editor=_["editor"].create(document.getElementById("container"),{language:this.language,theme:"vs",scrollBeyondLastLine:!1,minimap:{enabled:!1},value:this.value,hover:{delay:300}}),this.editor.onDidChangeModelContent((function(){e.outputs=[],e.errorMarkers=[],e.message="Analyzing...(loading for the first time may take a few seconds)",W(e.editor.getValue(),e.language,e.AllCommandInfo,e.lruCache,e.path).then((function(t){0==t.outputs.length?e.message="No problems detected!":(e.message="Done analysis!",e.outputs=t.outputs,e.errorMarkers=t.errorMarkers,e.commandRange=t.commandRange)}))})),_["languages"].registerHoverProvider("shell",{provideHover:this.provideHover}),_["languages"].registerHoverProvider("dockerfile",{provideHover:this.provideHover})}}}),Pe=Ne,Ie=(n("b16a"),Object(o["a"])(Pe,je,Re,!1,null,null,null)),Le=Ie.exports,Te={name:"Home",components:{Editor:Le},data:function(){return{language:"dockerfile",path:"https://clcheck.herokuapp.com/clcheck/"}},methods:{},created:function(){}},We=Te,Ee=Object(o["a"])(We,Se,Ce,!1,null,null,null),Me=Ee.exports;r["a"].use(u["a"]);var Be=[{path:"/",name:"Home",component:f,children:[{path:"",name:"CLcheck",component:Me},{path:"report",name:"Report",component:ye},{path:"bugs",name:"Bugs",component:Oe}]}],De=new u["a"]({mode:"history",base:"/clcheck/",routes:Be}),He=De;r["a"].config.productionTip=!1,new r["a"]({router:He,render:function(e){return e(c)}}).$mount("#app")},"663d":function(e,t,n){},b16a:function(e,t,n){"use strict";var r=n("25f7"),a=n.n(r);a.a},bdd5:function(e,t,n){},ffcc:function(e,t,n){"use strict";var r=n("bdd5"),a=n.n(r);a.a}});
//# sourceMappingURL=app.a125758a.js.map